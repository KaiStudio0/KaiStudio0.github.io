<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura RNG Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #0f0f23, #1a1a3a, #2d1b69);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3), transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(119, 198, 255, 0.3), transparent 50%);
            animation: backgroundPulse 4s ease-in-out infinite alternate;
        }
        
        @keyframes backgroundPulse {
            0% { opacity: 0.5; }
            100% { opacity: 0.8; }
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ffd700;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            gap: 10px;
        }
        
        .tab {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 255, 255, 0.2);
        }
        
        .tab.active {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-color: #fff;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .main-content {
            text-align: center;
        }
        
        .roll-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .roll-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.5);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-roll {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }
        
        .btn-auto {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.3);
        }
        
        .btn-quick {
            background: linear-gradient(45deg, #45b7d1, #2980b9);
            box-shadow: 0 8px 25px rgba(69, 183, 209, 0.3);
        }
        
        .auto-roll-controls {
            margin: 20px 0;
            display: none;
        }
        
        .auto-roll-controls.active {
            display: block;
        }
        
        .roll-animation {
            width: 300px;
            height: 200px;
            margin: 30px auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .aura-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 0 20px currentColor;
        }
        
        .aura-rarity {
            font-size: 1rem;
            opacity: 0.9;
            padding: 5px 15px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .shop-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .shop-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }
        
        .shop-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            color: #ffd700;
        }
        
        .shop-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .item-info h3 {
            color: #4ecdc4;
            margin-bottom: 5px;
        }
        
        .item-price {
            color: #ffd700;
            font-weight: 700;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .inventory-item {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .inventory-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }
        
        .rarity-common { border-color: #95a5a6; color: #95a5a6; }
        .rarity-rare { border-color: #3498db; color: #3498db; }
        .rarity-epic { border-color: #9b59b6; color: #9b59b6; }
        .rarity-legendary { border-color: #f39c12; color: #f39c12; }
        .rarity-mythic { border-color: #e74c3c; color: #e74c3c; }
        .rarity-divine { border-color: #fd79a8; color: #fd79a8; }
        .rarity-celestial { border-color: #00cec9; color: #00cec9; }
        .rarity-transcendent { border-color: #6c5ce7; color: #6c5ce7; }
        .rarity-omnipotent { 
            border-color: #ffd700; 
            color: #ffd700;
            background: linear-gradient(45deg, rgba(255, 215, 0, 0.1), rgba(255, 255, 255, 0.1));
            animation: omnipotentGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes omnipotentGlow {
            0% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.8); }
        }
        
        .animation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            pointer-events: none;
            display: none;
        }
        
        .mega-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            font-weight: 900;
            text-align: center;
            animation: megaRollAnimation 3s ease-out forwards;
        }
        
        @keyframes megaRollAnimation {
            0% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.5) rotateY(90deg);
            }
            20% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1.2) rotateY(0deg);
            }
            80% { 
                opacity: 1; 
                transform: translate(-50%, -50%) scale(1) rotateY(0deg);
            }
            100% { 
                opacity: 0; 
                transform: translate(-50%, -50%) scale(0.8) rotateY(-90deg);
            }
        }
        
        .ultra-animation {
            background: radial-gradient(circle, #ff6b6b, #4ecdc4, #45b7d1);
            animation: ultraPulse 3s ease-out forwards;
        }
        
        @keyframes ultraPulse {
            0%, 100% { opacity: 0; }
            50% { opacity: 0.8; }
        }
        
        .special-animation {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #ffeaa7);
            background-size: 400% 400%;
            animation: specialRainbow 3s ease-out forwards;
        }
        
        @keyframes specialRainbow {
            0%, 100% { 
                opacity: 0; 
                background-position: 0% 50%;
            }
            50% { 
                opacity: 0.9; 
                background-position: 100% 50%;
            }
        }
        
        .particles {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #ffd700;
            border-radius: 50%;
            animation: particleFall 2s linear forwards;
        }
        
        @keyframes particleFall {
            to {
                transform: translateY(100vh);
                opacity: 0;
            }
        }
        
        .rolling {
            animation: rollSpin 1s linear infinite;
        }
        
        @keyframes rollSpin {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }
        
        @media (max-width: 768px) {
            .title { font-size: 2rem; }
            .stats-bar { flex-direction: column; align-items: center; }
            .roll-buttons { flex-direction: column; align-items: center; }
            .shop-content { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="background-animation"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">‚ú® AURA RNG GAME ‚ú®</h1>
            
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value" id="coins">100</div>
                    <div class="stat-label">üí∞ Monedas</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="luck">1.0x</div>
                    <div class="stat-label">üçÄ Suerte</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="rolls">0</div>
                    <div class="stat-label">üé≤ Rolls</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="auras-count">0</div>
                    <div class="stat-label">‚ú® Auras</div>
                </div>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('main')">üéÆ Main</button>
            <button class="tab" onclick="switchTab('shop')">üõí Shop</button>
            <button class="tab" onclick="switchTab('inventory')">üì¶ Inventario</button>
        </div>
        
        <div id="main-tab" class="tab-content active">
            <div class="main-content">
                <div class="roll-section">
                    <div class="roll-animation" id="rollAnimation">
                        <div class="aura-name" id="auraName">¬°Haz tu primer roll!</div>
                        <div class="aura-rarity" id="auraRarity">Presiona Roll para comenzar</div>
                    </div>
                    
                    <div class="roll-buttons">
                        <button class="btn btn-roll" onclick="roll()">üé≤ Roll (50 monedas)</button>
                        <button class="btn btn-auto" onclick="toggleAutoRoll()">‚ö° Auto Roll</button>
                        <button class="btn btn-quick" onclick="quickRoll()">üí® Quick Roll (500 monedas)</button>
                    </div>
                    
                    <div class="auto-roll-controls" id="autoRollControls">
                        <button class="btn" onclick="stopAutoRoll()">‚èπÔ∏è Detener Auto Roll</button>
                        <p>Auto Roll Activo - Velocidad: <span id="autoRollSpeed">1</span> rolls/segundo</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="shop-tab" class="tab-content">
            <div class="shop-content">
                <div class="shop-section">
                    <h2 class="shop-title">üçÄ Mejoras de Suerte (Permanentes)</h2>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Amuleto B√°sico</h3>
                            <p>+0.1x Suerte</p>
                        </div>
                        <div>
                            <div class="item-price">1,000 monedas</div>
                            <button class="btn" onclick="buyLuckUpgrade(0.1, 1000)">Comprar</button>
                        </div>
                    </div>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Tr√©bol Dorado</h3>
                            <p>+0.5x Suerte</p>
                        </div>
                        <div>
                            <div class="item-price">5,000 monedas</div>
                            <button class="btn" onclick="buyLuckUpgrade(0.5, 5000)">Comprar</button>
                        </div>
                    </div>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Herradura M√≠tica</h3>
                            <p>+1.0x Suerte</p>
                        </div>
                        <div>
                            <div class="item-price">15,000 monedas</div>
                            <button class="btn" onclick="buyLuckUpgrade(1.0, 15000)">Comprar</button>
                        </div>
                    </div>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Suerte de gloriosa</h3>
                            <p>+100.0x Suerte</p>
                        </div>
                        <div>
                            <div class="item-price">100,000,000 monedas</div>
                            <button class="btn" onclick="buyLuckUpgrade(100.0,100000000)">Comprar</button>
                        </div>
                    </div>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Poci√≥n Billonaria</h3>
                            <p>+10000.0x Suerte</p>
                        </div>
                        <div>
                            <div class="item-price">10,000,000,000 monedas</div>
                            <button class="btn" onclick="buyLuckUpgrade(10000.0,10000000000)">Comprar</button>
                        </div>
                    </div>
                </div>
                
                <div class="shop-section">
                    <h2 class="shop-title">üß™ Pociones (Temporales)</h2>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Poci√≥n de Suerte</h3>
                            <p>+2.0x Suerte por 1 minuto</p>
                        </div>
                        <div>
                            <div class="item-price">500 monedas</div>
                            <button class="btn" onclick="buyPotion(2, 60000, 500)">Comprar</button>
                        </div>
                    </div>
                    <div class="shop-item">
                        <div class="item-info">
                            <h3>Elixir Divino</h3>
                            <p>+5.0x Suerte por 30 segundos</p>
                        </div>
                        <div>
                            <div class="item-price">2,000 monedas</div>
                            <button class="btn" onclick="buyPotion(5, 30000, 2000)">Comprar</button>
                        </div>
                    </div>
                </div>
                
                <div class="shop-section">
                    <h2 class="shop-title">üéÅ Starter Bundle</h2>
                    <div class="shop-item" id="starterBundle">
                        <div class="item-info">
                            <h3>Pack de Inicio</h3>
                            <p>+10000 monedas, +0.5x suerte, Poci√≥n gratis</p>
                        </div>
                        <div>
                            <div class="item-price">¬°GRATIS!</div>
                            <button class="btn" onclick="claimStarterBundle()">Reclamar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="inventory-tab" class="tab-content">
            <div class="shop-section">
                <h2 class="shop-title">üì¶ Tu Inventario de Auras</h2>
                <div class="inventory-grid" id="inventoryGrid">
                    <p style="text-align: center; opacity: 0.7; grid-column: 1/-1;">Tu inventario est√° vac√≠o. ¬°Haz algunos rolls para conseguir auras!</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="animation-overlay" id="animationOverlay">
        <div class="particles" id="particles"></div>
    </div>

    <script>
        // Game state
        let gameState = {
            coins: 100,
            luck: 1.0,
            totalRolls: 0,
            auras: [],
            autoRollActive: false,
            autoRollInterval: null,
            starterBundleClaimed: false,
            potionActive: false,
            potionMultiplier: 0,
            potionEndTime: 0
        };
        
        // Sound effects using Web Audio API
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }
        
        // Aura definitions with rarities and chances
        const auras = [
            // Common (1-100)
            {name: "Brisa Com√∫n", rarity: "Common", minValue: 1, maxValue: 100, color: "#95a5a6", chance: 40},
            {name: "Luz B√°sica", rarity: "Common", minValue: 1, maxValue: 100, color: "#95a5a6", chance: 35},
            
            // Rare (101-1000)  
            {name: "Viento Azul", rarity: "Rare", minValue: 101, maxValue: 1000, color: "#3498db", chance: 15},
            {name: "Chispa El√©ctrica", rarity: "Rare", minValue: 101, maxValue: 1000, color: "#3498db", chance: 12},
            
            // Epic (1001-10000)
            {name: "Llama P√∫rpura", rarity: "Epic", minValue: 1001, maxValue: 10000, color: "#9b59b6", chance: 8},
            {name: "Cristal M√≠stico", rarity: "Epic", minValue: 1001, maxValue: 10000, color: "#9b59b6", chance: 6},
            
            // Legendary (10001-100000)
            {name: "Oro Radiante", rarity: "Legendary", minValue: 10001, maxValue: 100000, color: "#f39c12", chance: 3},
            {name: "F√©nix Dorado", rarity: "Legendary", minValue: 10001, maxValue: 100000, color: "#f39c12", chance: 2},
            
            // Mythic (100001-1000000)
            {name: "Drag√≥n Carmes√≠", rarity: "Mythic", minValue: 100001, maxValue: 1000000, color: "#e74c3c", chance: 1},
            {name: "Tormenta Eterna", rarity: "Mythic", minValue: 100001, maxValue: 1000000, color: "#e74c3c", chance: 0.8},
            
            // Divine (1000001-100000000)
            {name: "Aurora Divina", rarity: "Divine", minValue: 1000001, maxValue: 100000000, color: "#fd79a8", chance: 0.5},
            {name: "Estrella Celestial", rarity: "Divine", minValue: 1000001, maxValue: 100000000, color: "#fd79a8", chance: 0.3},
            
            // Celestial (100000001-1000000000)
            {name: "Galaxia Infinita", rarity: "Celestial", minValue: 100000001, maxValue: 1000000000, color: "#00cec9", chance: 0.1},
            {name: "Cosmos Eterno", rarity: "Celestial", minValue: 100000001, maxValue: 1000000000, color: "#00cec9", chance: 0.08},
            
            // Transcendent (1000000001+)
            {name: "Omnipresencia", rarity: "Transcendent", minValue: 1000000001, maxValue: 10000000000, color: "#6c5ce7", chance: 0.05},
            {name: "Realidad Absoluta", rarity: "Transcendent", minValue: 1000000001, maxValue: 10000000000, color: "#6c5ce7", chance: 0.03},
            
            // Omnipotent (10000000001+)
            {name: "DIOS SUPREMO", rarity: "Omnipotent", minValue: 100000000001, maxValue: 100000000000000, color: "#ffd700", chance: 0.001},
            {name: "CREADOR UNIVERSAL", rarity: "Omnipotent", minValue: 10000000001, maxValue: 100000000000000, color: "#ffd700", chance: 0.0005}
        
        ];
        
        function updateUI() {
            document.getElementById('coins').textContent = gameState.coins.toLocaleString();
            document.getElementById('luck').textContent = getTotalLuck().toFixed(1) + 'x';
            document.getElementById('rolls').textContent = gameState.totalRolls.toLocaleString();
            document.getElementById('auras-count').textContent = gameState.auras.length.toLocaleString();
            
            // Update potion effect display
            if (gameState.potionActive && Date.now() < gameState.potionEndTime) {
                const remaining = Math.ceil((gameState.potionEndTime - Date.now()) / 1000);
                document.getElementById('luck').innerHTML = `${getTotalLuck().toFixed(1)}x <small>(+${gameState.potionMultiplier}x por ${remaining}s)</small>`;
            } else if (gameState.potionActive) {
                gameState.potionActive = false;
                gameState.potionMultiplier = 0;
            }
        }
        
        function getTotalLuck() {
            let total = gameState.luck;
            if (gameState.potionActive && Date.now() < gameState.potionEndTime) {
                total += gameState.potionMultiplier;
            }
            return total;
        }
        
        function roll() {
            if (gameState.coins < 50) {
                playSound(200, 0.3);
                alert('¬°No tienes suficientes monedas!');
                return;
            }
            
            gameState.coins -= 50;
            gameState.totalRolls++;
            
            playSound(400, 0.2);
            
            const rollAnimation = document.getElementById('rollAnimation');
            rollAnimation.classList.add('rolling');
            
            setTimeout(() => {
                const result = performRoll();
                displayRollResult(result);
                rollAnimation.classList.remove('rolling');
                updateUI();
            }, 1000);
        }
        
        function performRoll() {
            const totalLuck = getTotalLuck();
            
            // Calculate weighted chances based on luck
            let weightedAuras = auras.map(aura => ({
                ...aura,
                adjustedChance: aura.chance * (aura.chance < 1 ? totalLuck : Math.sqrt(totalLuck))
            }));
            
            const totalWeight = weightedAuras.reduce((sum, aura) => sum + aura.adjustedChance, 0);
            let random = Math.random() * totalWeight;
            
            for (let aura of weightedAuras) {
                random -= aura.adjustedChance;
                if (random <= 0) {
                    const value = Math.floor(Math.random() * (aura.maxValue - aura.minValue + 1)) + aura.minValue;
                    const newAura = {
                        ...aura,
                        value: value,
                        id: Date.now() + Math.random()
                    };
                    
                    gameState.auras.push(newAura);
                    gameState.coins += Math.floor(value / 10); // Reward coins based on value
                    
                    return newAura;
                }
            }
            
            // Fallback to first aura if something goes wrong
            const fallbackAura = weightedAuras[0];
            const value = Math.floor(Math.random() * (fallbackAura.maxValue - fallbackAura.minValue + 1)) + fallbackAura.minValue;
            const newAura = {
                ...fallbackAura,
                value: value,
                id: Date.now() + Math.random()
            };
            
            gameState.auras.push(newAura);
            gameState.coins += Math.floor(value / 10);
            
            return newAura;
        }
        
        function displayRollResult(aura) {
            const auraName = document.getElementById('auraName');
            const auraRarity = document.getElementById('auraRarity');
            
            auraName.textContent = aura.name;
            auraName.style.color = aura.color;
            
            auraRarity.textContent = `${aura.rarity} - Valor: ${aura.value.toLocaleString()}`;
            auraRarity.style.backgroundColor = aura.color + '20';
            auraRarity.style.borderColor = aura.color;
            
            // Trigger animations based on value
            if (aura.value >= 1000000000) {
                triggerSpecialAnimation(aura);
                playSound(800, 2, 'sawtooth');
            } else if (aura.value >= 100000000) {
                triggerUltraAnimation(aura);
                playSound(700, 1.5, 'square');
            } else if (aura.value >= 1000000) {
                triggerMegaAnimation(aura);
                playSound(600, 1, 'triangle');
            } else if (aura.value >= 100000) {
                triggerAnimation(aura);
                playSound(500, 0.8);
            } else if (aura.value >= 10000) {
                triggerBasicAnimation(aura);
                playSound(450, 0.5);
            }
            
            updateInventory();
        }
        
        function triggerBasicAnimation(aura) {
            createParticles(20, aura.color);
        }
        
        function triggerAnimation(aura) {
            createParticles(50, aura.color);
            const overlay = document.getElementById('animationOverlay');
            overlay.style.display = 'block';
            overlay.style.background = `radial-gradient(circle, ${aura.color}20, transparent 70%)`;
            
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 2000);
        }
        
        function triggerMegaAnimation(aura) {
            createParticles(100, aura.color);
            const overlay = document.getElementById('animationOverlay');
            overlay.innerHTML = `
                <div class="particles" id="particles"></div>
                <div class="mega-animation" style="color: ${aura.color}; text-shadow: 0 0 50px ${aura.color};">
                    ‚ú® ${aura.name.toUpperCase()} ‚ú®
                    <div style="font-size: 2rem; margin-top: 20px;">MEGA RARE!</div>
                </div>
            `;
            overlay.style.display = 'block';
            overlay.style.background = `radial-gradient(circle, ${aura.color}30, transparent 70%)`;
            
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 3000);
            
            createParticles(100, aura.color);
        }
        
        function triggerUltraAnimation(aura) {
            createParticles(200, aura.color);
            const overlay = document.getElementById('animationOverlay');
            overlay.innerHTML = `
                <div class="particles" id="particles"></div>
                <div class="mega-animation ultra-animation" style="color: ${aura.color}; text-shadow: 0 0 80px ${aura.color};">
                    üåü ${aura.name.toUpperCase()} üåü
                    <div style="font-size: 2.5rem; margin-top: 20px;">ULTRA LEGENDARY!</div>
                    <div style="font-size: 1.5rem; margin-top: 10px;">Valor: ${aura.value.toLocaleString()}</div>
                </div>
            `;
            overlay.classList.add('ultra-animation');
            overlay.style.display = 'block';
            
            setTimeout(() => {
                overlay.style.display = 'none';
                overlay.classList.remove('ultra-animation');
            }, 3000);
            
            // Screen shake effect
            document.body.style.animation = 'shake 0.5s ease-in-out';
            setTimeout(() => {
                document.body.style.animation = '';
            }, 500);
        }
        
        function triggerSpecialAnimation(aura) {
            createParticles(500, aura.color);
            const overlay = document.getElementById('animationOverlay');
            overlay.innerHTML = `
                <div class="particles" id="particles"></div>
                <div class="mega-animation special-animation" style="color: #fff; text-shadow: 0 0 100px ${aura.color}, 0 0 200px #fff;">
                    ‚≠ê ${aura.name.toUpperCase()} ‚≠ê
                    <div style="font-size: 3rem; margin-top: 20px;">GODLIKE!</div>
                    <div style="font-size: 2rem; margin-top: 15px;">Valor: ${aura.value.toLocaleString()}</div>
                    <div style="font-size: 1.2rem; margin-top: 10px;">¬°IMPOSIBLE!</div>
                </div>
            `;
            overlay.classList.add('special-animation');
            overlay.style.display = 'block';
            
            // Multiple sound effects
            setTimeout(() => playSound(1000, 0.3), 0);
            setTimeout(() => playSound(1200, 0.3), 300);
            setTimeout(() => playSound(1400, 0.3), 600);
            setTimeout(() => playSound(1600, 0.5), 900);
            
            setTimeout(() => {
                overlay.style.display = 'none';
                overlay.classList.remove('special-animation');
            }, 4000);
            
            // Extended screen shake
            document.body.style.animation = 'shake 2s ease-in-out';
            setTimeout(() => {
                document.body.style.animation = '';
            }, 2000);
        }
        
        function createParticles(count, color) {
            const particles = document.getElementById('particles');
            
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.backgroundColor = color || '#ffd700';
                particle.style.animationDelay = Math.random() * 2 + 's';
                particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                
                particles.appendChild(particle);
                
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 5000);
            }
        }
        
        function quickRoll() {
            if (gameState.coins < 500) {
                playSound(200, 0.3);
                alert('¬°No tienes suficientes monedas para Quick Roll!');
                return;
            }
            
            gameState.coins -= 500;
            gameState.totalRolls += 10;
            
            playSound(600, 0.3, 'square');
            
            const rollAnimation = document.getElementById('rollAnimation');
            rollAnimation.classList.add('rolling');
            
            // Perform 10 rolls quickly
            const results = [];
            for (let i = 0; i < 10; i++) {
                results.push(performRoll());
            }
            
            setTimeout(() => {
                // Show the best result
                const bestResult = results.reduce((best, current) => 
                    current.value > best.value ? current : best
                );
                
                displayRollResult(bestResult);
                rollAnimation.classList.remove('rolling');
                updateUI();
                
                alert(`Quick Roll completado! Mejor resultado: ${bestResult.name} (${bestResult.value.toLocaleString()})`);
            }, 1500);
        }
        
        function toggleAutoRoll() {
            if (gameState.autoRollActive) {
                stopAutoRoll();
            } else {
                startAutoRoll();
            }
        }
        
        function startAutoRoll() {
            if (gameState.coins < 50) {
                playSound(200, 0.3);
                alert('¬°No tienes suficientes monedas para Auto Roll!');
                return;
            }
            
            gameState.autoRollActive = true;
            document.getElementById('autoRollControls').classList.add('active');
            
            playSound(500, 0.2);
            
            gameState.autoRollInterval = setInterval(() => {
                if (gameState.coins >= 50) {
                    roll();
                } else {
                    stopAutoRoll();
                    alert('¬°Auto Roll detenido! No tienes suficientes monedas.');
                }
            }, 1000);
        }
        
        function stopAutoRoll() {
            gameState.autoRollActive = false;
            document.getElementById('autoRollControls').classList.remove('active');
            
            if (gameState.autoRollInterval) {
                clearInterval(gameState.autoRollInterval);
                gameState.autoRollInterval = null;
            }
            
            playSound(300, 0.3);
        }
        
        function switchTab(tab) {
            playSound(400, 0.1);
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tabBtn => {
                tabBtn.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tab + '-tab').classList.add('active');
            
            // Add active class to selected tab
            event.target.classList.add('active');
        }
        
        function buyLuckUpgrade(luckIncrease, cost) {
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                gameState.luck += luckIncrease;
                playSound(600, 0.5, 'triangle');
                updateUI();
                alert(`¬°Mejora de suerte comprada! +${luckIncrease}x suerte permanente.`);
            } else {
                playSound(200, 0.3);
                alert('¬°No tienes suficientes monedas!');
            }
        }
        
        function buyPotion(multiplier, duration, cost) {
            if (gameState.coins >= cost) {
                gameState.coins -= cost;
                gameState.potionActive = true;
                gameState.potionMultiplier = multiplier;
                gameState.potionEndTime = Date.now() + duration;
                
                playSound(700, 0.8, 'sine');
                updateUI();
                alert(`¬°Poci√≥n activada! +${multiplier}x suerte por ${duration/1000} segundos.`);
                
                // Update UI every second while potion is active
                const potionInterval = setInterval(() => {
                    if (Date.now() >= gameState.potionEndTime) {
                        clearInterval(potionInterval);
                        gameState.potionActive = false;
                        gameState.potionMultiplier = 0;
                        updateUI();
                        alert('¬°Efecto de poci√≥n terminado!');
                    } else {
                        updateUI();
                    }
                }, 1000);
            } else {
                playSound(200, 0.3);
                alert('¬°No tienes suficientes monedas!');
            }
        }
        
        function claimStarterBundle() {
            if (!gameState.starterBundleClaimed) {
                gameState.coins += 10000;
                gameState.luck += 0.5;
                gameState.potionActive = true;
                gameState.potionMultiplier = 2;
                gameState.potionEndTime = Date.now() + 60000;
                gameState.starterBundleClaimed = true;
                
                playSound(800, 1, 'sawtooth');
                updateUI();
                
                document.getElementById('starterBundle').innerHTML = `
                    <div class="item-info">
                        <h3>Pack de Inicio</h3>
                        <p>¬°Ya reclamado!</p>
                    </div>
                    <div>
                        <div class="item-price">‚úÖ Completado</div>
                    </div>
                `;
                
                alert('¬°Starter Bundle reclamado! +10000 monedas, +0.5x suerte permanente, y poci√≥n de 2x suerte por 1 minuto!');
            }
        }
        
        function updateInventory() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            
            if (gameState.auras.length === 0) {
                inventoryGrid.innerHTML = '<p style="text-align: center; opacity: 0.7; grid-column: 1/-1;">Tu inventario est√° vac√≠o. ¬°Haz algunos rolls para conseguir auras!</p>';
                return;
            }
            
            // Group auras by name and rarity
            const groupedAuras = {};
            gameState.auras.forEach(aura => {
                const key = `${aura.name}-${aura.rarity}`;
                if (!groupedAuras[key]) {
                    groupedAuras[key] = {
                        ...aura,
                        count: 0,
                        totalValue: 0,
                        bestValue: 0
                    };
                }
                groupedAuras[key].count++;
                groupedAuras[key].totalValue += aura.value;
                groupedAuras[key].bestValue = Math.max(groupedAuras[key].bestValue, aura.value);
            });
            
            // Sort by rarity and value
            const sortedAuras = Object.values(groupedAuras).sort((a, b) => b.bestValue - a.bestValue);
            
            inventoryGrid.innerHTML = sortedAuras.map(aura => `
                <div class="inventory-item rarity-${aura.rarity.toLowerCase()}">
                    <h3>${aura.name}</h3>
                    <p>${aura.rarity}</p>
                    <p>Cantidad: ${aura.count}</p>
                    <p>Mejor: ${aura.bestValue.toLocaleString()}</p>
                    <p>Valor Total: ${aura.totalValue.toLocaleString()}</p>
                </div>
            `).join('');
        }
        
        // Add shake animation for special effects
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(shakeStyle);
        
        // Initialize the game
        updateUI();
        updateInventory();
        
        // Add click sound to all buttons
        document.querySelectorAll('.btn, .tab').forEach(btn => {
            btn.addEventListener('click', () => {
                playSound(350, 0.1);
            });
        });
        
        // Auto-save game state to prevent loss (using variables instead of localStorage)
        let autoSaveData = null;
        
        function saveGame() {
            autoSaveData = JSON.stringify(gameState);
        }
        
        function loadGame() {
            if (autoSaveData) {
                try {
                    const loaded = JSON.parse(autoSaveData);
                    gameState = { ...gameState, ...loaded };
                    updateUI();
                    updateInventory();
                } catch (e) {
                    console.log('No save data found, starting fresh');
                }
            }
        }
        
        // Save game every 30 seconds
        setInterval(saveGame, 30000);
        
        // Load game on start
        loadGame();
        
        console.log('üéÆ Aura RNG Game cargado! ¬°Que tengas suerte en tus rolls!');
    </script>
</body>
</html>
